---
alwaysApply: true
---

# Active Context: notes2vec

## Current Status

**Project Phase**: Initialization / Planning

The memory bank is being initialized based on the project description. The project is in early stages with core architecture and technology stack defined, but implementation has not yet begun.

## Current Focus

- Establishing memory bank structure and documentation
- Defining project architecture and technical specifications
- Preparing for initial implementation phase

## Recent Activities

- Memory bank initialization from project description
- Review of technical literature and architecture decisions
- Documentation of core requirements and constraints

## Next Steps

1. **Project Setup**: Initialize Rust project structure with Cargo
2. **Dependency Configuration**: Set up Cargo.toml with required dependencies (Candle, LanceDB, clap, etc.)
3. **Core Module Structure**: Design and implement basic module architecture
4. **CLI Framework**: Implement basic CLI structure with `init`, `index`, `watch`, and `search` commands
5. **Embedding Pipeline**: Integrate Candle for model loading and inference
6. **Vector Database**: Set up LanceDB for vector storage and retrieval
7. **File Watching**: Implement file system monitoring with notify-debouncer-full

## Active Decisions

### Technology Choices (Confirmed)
- **Language**: Rust
- **ML Framework**: Candle (pure Rust, quantized models)
- **Embedding Model**: nomic-embed-text-v1.5 (quantized, 8-bit)
- **Vector Database**: LanceDB (embedded, disk-backed)
- **State Store**: redb (lightweight key-value store)
- **CLI Framework**: clap
- **TUI**: ratatui
- **File Watching**: notify-debouncer-full
- **Markdown Parsing**: pulldown-cmark
- **Chunking**: semchunk-rs
- **Async Runtime**: tokio
- **Parallel Processing**: rayon

### Architecture Decisions (Pending Implementation)
- Chunking strategy: Header-aware splitting with context injection
- Indexing strategy: Incremental updates with hash-based change detection
- Concurrency model: Tokio for async I/O, Rayon for CPU-bound tasks
- Storage location: `~/.notes2vec` directory for database and state

## Open Questions

1. What should be the default chunk size for text splitting? (Suggested: 512 tokens)
2. What should be the debounce window for file watching? (Suggested: 500ms)
3. What should be the default number of search results? (Suggested: 10-20)
4. Should the tool support multiple note directories or a single root?
5. What metadata should be extracted and stored from frontmatter?

## Pending Tasks

- [ ] Initialize Rust project structure
- [ ] Configure Cargo.toml with dependencies
- [ ] Design module architecture
- [ ] Implement CLI command structure
- [ ] Set up configuration management
- [ ] Implement file discovery and filtering
- [ ] Implement Markdown parsing
- [ ] Implement chunking logic
- [ ] Integrate Candle for embeddings
- [ ] Set up LanceDB database
- [ ] Implement indexing pipeline
- [ ] Implement file watching
- [ ] Implement search functionality
- [ ] Create TUI for search results
- [ ] Add error handling and logging
- [ ] Write tests

## Notes

- The project follows a "local-first" philosophy with complete data sovereignty
- Performance is critical: must run efficiently on consumer hardware
- The tool should feel "invisible" until neededâ€”background indexing, instant search
- Privacy is paramount: no telemetry, no external API calls, no data collection
